
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A small CLI for creating and managing local Kubernetes clusters using k0s">
      
      
      
        <link rel="canonical" href="https://makhov.github.io/k0da/user-guide/managing-clusters/">
      
      
        <link rel="prev" href="../configuration/">
      
      
        <link rel="next" href="../loading-images/">
      
      
      <link rel="icon" href="../../img/k0s-favicon-192.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.21">
    
    
      
        <title>Managing Clusters - k0da Documentation</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.2a3383ac.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#managing-clusters" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="k0da Documentation" class="md-header__button md-logo" aria-label="k0da Documentation" data-md-component="logo">
      
  <img src="../../img/k0s-favicon-192.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            k0da Documentation
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Managing Clusters
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="blue"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/makhov/k0da" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    makhov/k0da
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="k0da Documentation" class="md-nav__button md-logo" aria-label="k0da Documentation" data-md-component="logo">
      
  <img src="../../img/k0s-favicon-192.png" alt="logo">

    </a>
    k0da Documentation
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/makhov/k0da" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    makhov/k0da
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../installation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Quick Start
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    User Guide
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            User Guide
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../creating-clusters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Creating Clusters
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Managing Clusters
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Managing Clusters
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Listing Clusters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Listing Clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-listing" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Listing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detailed-information" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-output" class="md-nav__link">
    <span class="md-ellipsis">
      Example Output
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Clusters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Updating Clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-process" class="md-nav__link">
    <span class="md-ellipsis">
      Update Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Update Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-can-be-updated" class="md-nav__link">
    <span class="md-ellipsis">
      What Can Be Updated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-cannot-be-updated" class="md-nav__link">
    <span class="md-ellipsis">
      What Cannot Be Updated
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Deleting Clusters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deleting Clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-deletion" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Deletion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#force-deletion" class="md-nav__link">
    <span class="md-ellipsis">
      Force Deletion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion-process" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-context-management" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster Context Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cluster Context Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#context-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Context Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubeconfig-management" class="md-nav__link">
    <span class="md-ellipsis">
      Kubeconfig Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regular-maintenance" class="md-nav__link">
    <span class="md-ellipsis">
      Regular Maintenance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Naming Conventions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automation" class="md-nav__link">
    <span class="md-ellipsis">
      Automation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../loading-images/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Loading Images
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cli/k0da/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CLI Reference
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../examples/basic/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Examples
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#overview" class="md-nav__link">
    <span class="md-ellipsis">
      Overview
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#listing-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Listing Clusters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Listing Clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-listing" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Listing
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#detailed-information" class="md-nav__link">
    <span class="md-ellipsis">
      Detailed Information
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#example-output" class="md-nav__link">
    <span class="md-ellipsis">
      Example Output
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#updating-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Updating Clusters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Updating Clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-updates" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Updates
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-process" class="md-nav__link">
    <span class="md-ellipsis">
      Update Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#update-examples" class="md-nav__link">
    <span class="md-ellipsis">
      Update Examples
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-can-be-updated" class="md-nav__link">
    <span class="md-ellipsis">
      What Can Be Updated
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#what-cannot-be-updated" class="md-nav__link">
    <span class="md-ellipsis">
      What Cannot Be Updated
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deleting-clusters" class="md-nav__link">
    <span class="md-ellipsis">
      Deleting Clusters
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Deleting Clusters">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#basic-deletion" class="md-nav__link">
    <span class="md-ellipsis">
      Basic Deletion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#force-deletion" class="md-nav__link">
    <span class="md-ellipsis">
      Force Deletion
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#deletion-process" class="md-nav__link">
    <span class="md-ellipsis">
      Deletion Process
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#examples" class="md-nav__link">
    <span class="md-ellipsis">
      Examples
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cluster-context-management" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster Context Management
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cluster Context Management">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#context-operations" class="md-nav__link">
    <span class="md-ellipsis">
      Context Operations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#kubeconfig-management" class="md-nav__link">
    <span class="md-ellipsis">
      Kubeconfig Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      Best Practices
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Best Practices">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#regular-maintenance" class="md-nav__link">
    <span class="md-ellipsis">
      Regular Maintenance
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#naming-conventions" class="md-nav__link">
    <span class="md-ellipsis">
      Naming Conventions
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#automation" class="md-nav__link">
    <span class="md-ellipsis">
      Automation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#monitoring" class="md-nav__link">
    <span class="md-ellipsis">
      Monitoring
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      Troubleshooting
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#common-issues" class="md-nav__link">
    <span class="md-ellipsis">
      Common Issues
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recovery" class="md-nav__link">
    <span class="md-ellipsis">
      Recovery
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#next-steps" class="md-nav__link">
    <span class="md-ellipsis">
      Next Steps
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="managing-clusters">Managing Clusters</h1>
<p>This guide covers how to manage existing k0da clusters including listing, updating, and deleting clusters.</p>
<h2 id="overview">Overview</h2>
<p>Once you have created clusters with k0da, you'll need to manage them throughout their lifecycle. k0da provides simple commands to list all your clusters, update their configuration, and clean them up when no longer needed.</p>
<h2 id="listing-clusters">Listing Clusters</h2>
<p>Use the <code>list</code> command to see all your k0da clusters:</p>
<h3 id="basic-listing">Basic Listing</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="c1"># List all running clusters</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a>k0da<span class="w"> </span>list
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="c1"># List all clusters including stopped ones</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>k0da<span class="w"> </span>list<span class="w"> </span>--all
</code></pre></div>
<h3 id="detailed-information">Detailed Information</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="c1"># Show detailed cluster information</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>k0da<span class="w"> </span>list<span class="w"> </span>--verbose
</code></pre></div>
<p>The verbose output includes:</p>
<ul>
<li>Cluster status (running/stopped)</li>
<li>k0s version</li>
<li>Node count</li>
<li>Container IDs</li>
<li>Port mappings</li>
<li>Creation time</li>
</ul>
<h3 id="example-output">Example Output</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a>$<span class="w"> </span>k0da<span class="w"> </span>list
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a>NAME<span class="w">           </span>STATUS<span class="w">    </span>NODES<span class="w">   </span>VERSION<span class="w">         </span>AGE
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a>dev-cluster<span class="w">    </span>Running<span class="w">   </span><span class="m">1</span><span class="w">       </span>v1.33.4-k0s.0<span class="w">   </span>2h
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>test-env<span class="w">       </span>Running<span class="w">   </span><span class="m">3</span><span class="w">       </span>v1.33.4-k0s.0<span class="w">   </span>1h
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>staging<span class="w">        </span>Stopped<span class="w">   </span><span class="m">2</span><span class="w">       </span>v1.33.4-k0s.0<span class="w">   </span>3d
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a>
<a id="__codelineno-2-7" name="__codelineno-2-7" href="#__codelineno-2-7"></a>$<span class="w"> </span>k0da<span class="w"> </span>list<span class="w"> </span>--verbose
<a id="__codelineno-2-8" name="__codelineno-2-8" href="#__codelineno-2-8"></a>NAME<span class="w">           </span>STATUS<span class="w">    </span>NODES<span class="w">   </span>VERSION<span class="w">         </span>CONTAINERS<span class="w">                 </span>PORTS<span class="w">                    </span>AGE
<a id="__codelineno-2-9" name="__codelineno-2-9" href="#__codelineno-2-9"></a>dev-cluster<span class="w">    </span>Running<span class="w">   </span><span class="m">1</span><span class="w">       </span>v1.33.4-k0s.0<span class="w">   </span>k0da-dev-cluster-control<span class="w">   </span><span class="m">0</span>.0.0.0:6443-&gt;6443/tcp<span class="w">   </span>2h
<a id="__codelineno-2-10" name="__codelineno-2-10" href="#__codelineno-2-10"></a>test-env<span class="w">       </span>Running<span class="w">   </span><span class="m">3</span><span class="w">       </span>v1.33.4-k0s.0<span class="w">   </span>k0da-test-env-control,<span class="w">     </span><span class="m">0</span>.0.0.0:6444-&gt;6443/tcp<span class="w">   </span>1h
<a id="__codelineno-2-11" name="__codelineno-2-11" href="#__codelineno-2-11"></a><span class="w">                                                 </span>k0da-test-env-worker,
<a id="__codelineno-2-12" name="__codelineno-2-12" href="#__codelineno-2-12"></a><span class="w">                                                 </span>k0da-test-env-worker2
</code></pre></div>
<h2 id="updating-clusters">Updating Clusters</h2>
<p>The <code>update</code> command allows you to modify existing cluster configuration:</p>
<h3 id="basic-updates">Basic Updates</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="c1"># Update cluster with new configuration file</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a>k0da<span class="w"> </span>update<span class="w"> </span>my-cluster<span class="w"> </span>--config<span class="w"> </span>updated-config.yaml
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="c1"># Update to a different k0s version</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>k0da<span class="w"> </span>update<span class="w"> </span>my-cluster<span class="w"> </span>--image<span class="w"> </span>quay.io/k0sproject/k0s:v1.33.5-k0s.0
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="c1"># Update cluster by name</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a>k0da<span class="w"> </span>update<span class="w"> </span>--name<span class="w"> </span>my-cluster<span class="w"> </span>--config<span class="w"> </span>new-config.yaml
</code></pre></div>
<h3 id="update-process">Update Process</h3>
<p>When you update a cluster, k0da:</p>
<ol>
<li>Validates the new configuration</li>
<li>Updates the effective k0s configuration using k0s dynamic config</li>
<li>Applies any new manifests without restart</li>
</ol>
<h3 id="update-examples">Update Examples</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="c1"># Update with timeout for readiness check</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a>k0da<span class="w"> </span>update<span class="w"> </span>production<span class="w"> </span>--config<span class="w"> </span>prod-v2.yaml<span class="w"> </span>--timeout<span class="w"> </span>120s
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a><span class="c1"># Update development cluster with new manifests</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>k0da<span class="w"> </span>update<span class="w"> </span>dev<span class="w"> </span>--config<span class="w"> </span>dev-with-ingress.yaml
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a><span class="c1"># Quick version update</span>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a>k0da<span class="w"> </span>update<span class="w"> </span><span class="nb">test</span><span class="w"> </span>--image<span class="w"> </span>quay.io/k0sproject/k0s:latest
</code></pre></div>
<h3 id="what-can-be-updated">What Can Be Updated</h3>
<ul>
<li>k0s configuration (ClusterConfig)</li>
<li>Manifest files</li>
<li>Helm charts (via k0s configuration)</li>
</ul>
<h3 id="what-cannot-be-updated">What Cannot Be Updated</h3>
<ul>
<li>k0s version (requires restart)</li>
<li>Node topology (adding/removing nodes)</li>
<li>Network configuration (pod/service CIDRs)</li>
<li>Container runtime settings</li>
<li>Volume mounts</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For changes that cannot be updated, you'll need to delete and recreate the cluster.</p>
</div>
<h2 id="deleting-clusters">Deleting Clusters</h2>
<p>Remove clusters when they're no longer needed:</p>
<h3 id="basic-deletion">Basic Deletion</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="c1"># Delete a specific cluster</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a>k0da<span class="w"> </span>delete<span class="w"> </span>my-cluster
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="c1"># Delete using the name flag</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>k0da<span class="w"> </span>delete<span class="w"> </span>--name<span class="w"> </span>my-cluster
</code></pre></div>
<h3 id="force-deletion">Force Deletion</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="c1"># Skip confirmation prompt</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a>k0da<span class="w"> </span>delete<span class="w"> </span>my-cluster<span class="w"> </span>--force
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a>
<a id="__codelineno-6-4" name="__codelineno-6-4" href="#__codelineno-6-4"></a><span class="c1"># Delete multiple clusters</span>
<a id="__codelineno-6-5" name="__codelineno-6-5" href="#__codelineno-6-5"></a>k0da<span class="w"> </span>delete<span class="w"> </span>dev-cluster<span class="w"> </span>test-env<span class="w"> </span>staging<span class="w"> </span>--force
</code></pre></div>
<h3 id="deletion-process">Deletion Process</h3>
<p>When deleting a cluster, k0da:
1. Stops all cluster containers
2. Removes the containers
3. Cleans up networks (if not shared)
4. Removes cluster data</p>
<h3 id="examples">Examples</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="c1"># Interactive deletion (asks for confirmation)</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a>k0da<span class="w"> </span>delete<span class="w"> </span>old-cluster
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a><span class="c1"># Force deletion without confirmation</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>k0da<span class="w"> </span>delete<span class="w"> </span>temp-cluster<span class="w"> </span>--force
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7" href="#__codelineno-7-7"></a><span class="c1"># Delete multiple clusters at once</span>
<a id="__codelineno-7-8" name="__codelineno-7-8" href="#__codelineno-7-8"></a>k0da<span class="w"> </span>delete<span class="w"> </span>cluster1<span class="w"> </span>cluster2<span class="w"> </span>cluster3<span class="w"> </span>--force
</code></pre></div>
<h2 id="cluster-context-management">Cluster Context Management</h2>
<p>Switch between different cluster contexts:</p>
<h3 id="context-operations">Context Operations</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="c1"># Switch to a specific cluster context</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a>k0da<span class="w"> </span>context<span class="w"> </span>my-cluster
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a><span class="c1"># List available contexts</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>kubectl<span class="w"> </span>config<span class="w"> </span>get-contexts
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="c1"># Get current context</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a>kubectl<span class="w"> </span>config<span class="w"> </span>current-context
</code></pre></div>
<h3 id="kubeconfig-management">Kubeconfig Management</h3>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="c1"># Get kubeconfig for a specific cluster</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a>k0da<span class="w"> </span>kubeconfig<span class="w"> </span>my-cluster
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="c1"># Merge cluster kubeconfig with your default kubeconfig</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>k0da<span class="w"> </span>kubeconfig<span class="w"> </span>my-cluster<span class="w"> </span>--merge
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="c1"># Save kubeconfig to a specific file</span>
<a id="__codelineno-9-8" name="__codelineno-9-8" href="#__codelineno-9-8"></a>k0da<span class="w"> </span>kubeconfig<span class="w"> </span>my-cluster<span class="w"> </span>&gt;<span class="w"> </span>my-cluster-kubeconfig.yaml
</code></pre></div>
<h2 id="best-practices">Best Practices</h2>
<h3 id="regular-maintenance">Regular Maintenance</h3>
<ol>
<li>
<p><strong>List clusters regularly</strong> to keep track of running clusters:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a>k0da<span class="w"> </span>list<span class="w"> </span>--all
</code></pre></div></p>
</li>
<li>
<p><strong>Clean up unused clusters</strong> to free resources:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a>k0da<span class="w"> </span>delete<span class="w"> </span>old-cluster<span class="w"> </span>test-cluster<span class="w"> </span>--force
</code></pre></div></p>
</li>
<li>
<p><strong>Update clusters</strong> to keep k0s versions current:
   <div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a>k0da<span class="w"> </span>update<span class="w"> </span>production<span class="w"> </span>--image<span class="w"> </span>quay.io/k0sproject/k0s:v1.33.5-k0s.0
</code></pre></div></p>
</li>
</ol>
<h3 id="naming-conventions">Naming Conventions</h3>
<p>Use consistent naming for easier management:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="c1"># Environment-based naming</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a>k0da<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>dev-
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>k0da<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>prod-
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a>k0da<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span>test-
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="c1"># Feature-based naming</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a>k0da<span class="w"> </span>delete<span class="w"> </span>feature-auth<span class="w"> </span>feature-payment<span class="w"> </span>--force
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="c1"># Temporary clusters</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a>k0da<span class="w"> </span>delete<span class="w"> </span>temp-*<span class="w"> </span>--force
</code></pre></div>
<h3 id="automation">Automation</h3>
<p>Integrate cluster management into scripts:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="ch">#!/bin/bash</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="c1"># Cleanup script for temporary clusters</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="c1"># List all temporary clusters</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="nv">temp_clusters</span><span class="o">=</span><span class="k">$(</span>k0da<span class="w"> </span>list<span class="w"> </span><span class="p">|</span><span class="w"> </span>grep<span class="w"> </span><span class="s2">&quot;temp-&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>awk<span class="w"> </span><span class="s1">&#39;{print $1}&#39;</span><span class="k">)</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span>!<span class="w"> </span>-z<span class="w"> </span><span class="s2">&quot;</span><span class="nv">$temp_clusters</span><span class="s2">&quot;</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span>
<a id="__codelineno-14-8" name="__codelineno-14-8" href="#__codelineno-14-8"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Cleaning up temporary clusters: </span><span class="nv">$temp_clusters</span><span class="s2">&quot;</span>
<a id="__codelineno-14-9" name="__codelineno-14-9" href="#__codelineno-14-9"></a><span class="w">    </span>k0da<span class="w"> </span>delete<span class="w"> </span><span class="nv">$temp_clusters</span><span class="w"> </span>--force
<a id="__codelineno-14-10" name="__codelineno-14-10" href="#__codelineno-14-10"></a><span class="k">else</span>
<a id="__codelineno-14-11" name="__codelineno-14-11" href="#__codelineno-14-11"></a><span class="w">    </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;No temporary clusters to clean up&quot;</span>
<a id="__codelineno-14-12" name="__codelineno-14-12" href="#__codelineno-14-12"></a><span class="k">fi</span>
</code></pre></div>
<h3 id="monitoring">Monitoring</h3>
<p>Keep track of cluster resource usage:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># Check cluster status</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>k0da<span class="w"> </span>list<span class="w"> </span>--verbose
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a>
<a id="__codelineno-15-4" name="__codelineno-15-4" href="#__codelineno-15-4"></a><span class="c1"># Check Docker/Podman resource usage</span>
<a id="__codelineno-15-5" name="__codelineno-15-5" href="#__codelineno-15-5"></a>docker<span class="w"> </span>stats<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>--filter<span class="w"> </span><span class="s2">&quot;label=io.k0da.cluster&quot;</span><span class="w"> </span>--format<span class="w"> </span><span class="s2">&quot;{{.Names}}&quot;</span><span class="k">)</span>
<a id="__codelineno-15-6" name="__codelineno-15-6" href="#__codelineno-15-6"></a>
<a id="__codelineno-15-7" name="__codelineno-15-7" href="#__codelineno-15-7"></a><span class="c1"># Monitor cluster health</span>
<a id="__codelineno-15-8" name="__codelineno-15-8" href="#__codelineno-15-8"></a>kubectl<span class="w"> </span>get<span class="w"> </span>nodes
<a id="__codelineno-15-9" name="__codelineno-15-9" href="#__codelineno-15-9"></a>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-A
<a id="__codelineno-15-10" name="__codelineno-15-10" href="#__codelineno-15-10"></a>kubectl<span class="w"> </span>top<span class="w"> </span>nodes<span class="w">  </span><span class="c1"># if metrics-server is installed</span>
</code></pre></div>
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="common-issues">Common Issues</h3>
<p><strong>Cluster not listed:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># Check if containers exist</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>docker<span class="w"> </span>ps<span class="w"> </span>-a<span class="w"> </span>--filter<span class="w"> </span><span class="s2">&quot;label=io.k0da.cluster&quot;</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1"># Check container logs</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>docker<span class="w"> </span>logs<span class="w"> </span>k0da-cluster-name-control
</code></pre></div></p>
<p><strong>Update fails:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="c1"># Check configuration validity</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a>k0da<span class="w"> </span>update<span class="w"> </span>cluster-name<span class="w"> </span>--config<span class="w"> </span>config.yaml<span class="w"> </span>--dry-run
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="c1"># Check cluster status</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a>k0da<span class="w"> </span>list<span class="w"> </span>--verbose
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a>kubectl<span class="w"> </span>get<span class="w"> </span>nodes
</code></pre></div></p>
<p><strong>Delete fails:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="c1"># Force stop and remove containers</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a>docker<span class="w"> </span>stop<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-q<span class="w"> </span>--filter<span class="w"> </span><span class="s2">&quot;label=io.k0da.cluster.name=cluster-name&quot;</span><span class="k">)</span>
<a id="__codelineno-18-3" name="__codelineno-18-3" href="#__codelineno-18-3"></a>docker<span class="w"> </span>rm<span class="w"> </span><span class="k">$(</span>docker<span class="w"> </span>ps<span class="w"> </span>-aq<span class="w"> </span>--filter<span class="w"> </span><span class="s2">&quot;label=io.k0da.cluster.name=cluster-name&quot;</span><span class="k">)</span>
</code></pre></div></p>
<h3 id="recovery">Recovery</h3>
<p>If a cluster becomes unresponsive:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="c1"># Try updating to reset configuration</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a>k0da<span class="w"> </span>update<span class="w"> </span>problematic-cluster<span class="w"> </span>--config<span class="w"> </span>working-config.yaml
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="c1"># If update fails, delete and recreate</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a>k0da<span class="w"> </span>delete<span class="w"> </span>problematic-cluster<span class="w"> </span>--force
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a>k0da<span class="w"> </span>create<span class="w"> </span>problematic-cluster<span class="w"> </span>--config<span class="w"> </span>working-config.yaml
</code></pre></div>
<h2 id="next-steps">Next Steps</h2>
<ul>
<li><strong><a href="../configuration/">Configuration</a></strong> - Learn about advanced configuration options</li>
<li><strong><a href="../loading-images/">Loading Images</a></strong> - Get your applications into clusters</li>
<li><strong><a href="../../cli/k0da/">CLI Reference</a></strong> - Detailed command reference</li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["toc.autohide", "search.suggest", "search.highlight", "content.code.copy", "content.tabs.link", "content.code.annotation"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
    
  </body>
</html>